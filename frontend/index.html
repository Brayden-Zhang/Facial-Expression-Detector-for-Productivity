<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Demo</title>
    <style>
        #statusDisplay {
            margin-bottom: 10px;
        }

        #toggleButton {
            margin-bottom: 10px;
        }

        #toggleStatus {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
        }

        #toggleStatus.enabled {
            background-color: green;
        }

        #toggleStatus.disabled {
            background-color: red;
        }
    </style>
</head>
<body>
    <div id="statusDisplay"></div>
    <button id="toggleButton">Toggle Data Sending</button>
    <div id="toggleStatus"></div>
    <div id="dataDisplay"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        socket.on('status_update', function(data) {
            document.getElementById('statusDisplay').innerHTML = data.status;
        });

        socket.on('connect', function() {
            console.log('Connected to server');
        });

        socket.on('disconnect', function() {
            console.log('Disconnected from server');
        });

        document.getElementById('toggleButton').addEventListener('click', function() {
            socket.emit('toggle_data_sending');
        });

        var toggleStatus = document.getElementById('toggleStatus');
        var dataDisplay = document.getElementById('dataDisplay');

        socket.on('status_update', function(data) {
            toggleStatus.className = data.status === 'Data sending enabled' ? 'enabled' : 'disabled';
        });

        socket.on('data_update', function(data) {
            dataDisplay.innerHTML = 'Counter: ' + data.counter;
        });
    </script>
</body>
</html>
